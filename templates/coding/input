<!DOCTYPE html>
{% load staticfiles %}
<html>
  <head>
	<title>Project</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<Bootstrap >
	<link href="{%static "bootstrap/css/bootstrap.min.css"%}" rel="stylesheet">
	<link href="{%static "css/styles.css"%}" rel="stylesheet">

	<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
	<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
	<!--[if lt IE 9]>
	  <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
	  <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
	<![endif]-->
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.js"></script> 
    <script src="http://malsup.github.com/jquery.form.js"></script>
    {% if messages %}
	<ul class="messages">
    	{% for message in messages %}
    	<li{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</li>
    	{% endfor %}
	</ul>
	{% endif %}

  </head>
  <body>
	<div class="header">
		 <div class="container">
			<div class="row">
			   <div class="col-md-5">
				  <!-- Logo -->
				  <div class="logo">
					 <h1><a href="#">Question</a></h1>
				  </div>
			   </div>
			    
			</div>
		 </div>
	</div>

	<div class="page-content">
		<div class="row">
		  <div class="col-md-10">
			<div class="sidebar content-box" style="display: block;">
				<ul class="nav">
					<div class="col-sm-offset-11 col-sm-40">
                	<h4>Time Left</h4>
					<div id="countdown"></div>
                	<div style="color:red;font-size:300%;" id="countdown2"></div>
                	</div>
				   <div class="col-md-15">
				   <div class="col-sm-offset-11 col-sm-50">
                                <li><a href="/ret/" type="button"  class="btn btn-primary">RETURN</a></li>
                                </div>
				    <div id="status"></div>
 				     <h4>{{question_name.first.question_name}}</h4>
					<p style="font-family:verdana,font-size:160%;">{{question_name.first.description}}<br><br>Input Format:{{question_name.first.input_format}}<br>Output Format:{{question_name.first.output_format}}<br>{{question_name.first.sample}}</p>

							   
						<div class="content-box-large">
						 
							<div class="panel-body">
								<form class="form-horizontal" role="form"  action="{% url 'upload' %}" id="error"  method="POST"  enctype="multipart/form-data">{% csrf_token %}
									
								  <div class="form-group"> 
								  <select name="lan">
											  <option value="cpp">C++</option>
											  <option value="c">C</option>
											  <option value="java">Java</option>
											</select>

									
												<br><br><br>Main class name: <input type="text" name="class"><br>
									

											<p><b>Note:</b>Main class name is applicable to Java programs only.</p>

									<label for="inputquestion" class="col-sm-12 control-label">Code</label>
									<div class="col-sm-15">
									  <textarea class="form-control" name="code"  id="ans" rows="10" cols="60" placeholder="Enter the code..." ></textarea>
									</div>

								  </div>
								 
								  <div class="form-group">
									<div  class="col-sm-offset-11 col-sm-50">
									  <input type="hidden" name="idno" value="{{ question_name.first.question_id }}"/>
									  <button type="submit" value="submit" class="btn btn-primary"> Run </button>
									</div>
								  </div>
								 
								 
								</form>
								

									
							</div>
							
									
						</div>
						<div><h3>RESULT</h3></div>
                          <div class="col-sm-15">
									  <textarea class="form-control" name="errormsg"  id="errmsg" rows="10" cols="60" placeholder="Errors......" ></textarea>
							</div>
                          <div class="col-sm-offset-11 col-sm-50">
                                <li><a href="/final/" type="button"  class="btn btn-primary">SUBMIT</a></li>
                                </div>
                              
					 
					
				   
				</ul>
			 </div>
		  </div>
		  
		</div>
	</div>
  <script type="text/javascript">

   $(document).ready(function(event) {
        //$("#error").ajaxForm(function(){ #}
       	 //{#event.preventDefault();#}
           
       	 var code = $("#ans").val();

        var options = { 
            
	        beforeSubmit:  showRequest,  // pre-submit callback 
	        success:       showResponse  // post-submit callback 
            
        }; 
 
	     
	    $('#error').ajaxForm(options); 
	   
    });
function showRequest(formData, jqForm, options) { 
	alert('About to submit: \n\n' ); 
	    return true; 
} 

function showResponse(responseText) { 
	alert('About to submit: \n\n');
	$("#errmsg").html(responseText);
	    return true; 
} 
</script>
<script>
 function countdown( elementName, minutes, seconds )
{
    var element, endTime, hours, mins, msLeft, time;

    function twoDigits( n )
    {
        return (n <= 9 ? "0" + n : n);
    }

    function updateTimer()
    {
        msLeft = endTime - (+new Date);
        if ( msLeft < 1000 ) {
            element.innerHTML = "countdown's over!";
        } else {
            time = new Date( msLeft );
            hours = time.getUTCHours();
            mins = time.getUTCMinutes();
            element.innerHTML = (hours ? hours + ':' + twoDigits( mins ) : mins) + ':' + twoDigits( time.getUTCSeconds() );
            setTimeout( updateTimer, time.getUTCMilliseconds() + 500 );
        }
    }

    element = document.getElementById( elementName );
    endTime = (+new Date) + 1000 * (60*minutes + seconds) + 500;
    updateTimer();
}

//countdown( "countdown", 1, 10 );
countdown( "countdown2", {{request.session.get_expiry_age}} / 60, {{request.session.get_expiry_age}} % 60);
</script>
  </body>
</html>